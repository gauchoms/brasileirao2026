{% extends "base.html" %}

{% block title %}BrasileirÃ£o 2026 - Home{% endblock %}

{% block content %}
<h1>BrasileirÃ£o 2026</h1>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; margin-top: 2rem;">

    <a href="/projecoes" style="text-decoration: none;">
        <div style="background: var(--cinza); border: 1px solid var(--cinza-medio); border-radius: 8px; padding: 2rem; transition: border-color 0.2s; cursor: pointer;" onmouseover="this.style.borderColor='var(--verde)'" onmouseout="this.style.borderColor='var(--cinza-medio)'">
            <div style="font-family: 'Bebas Neue', sans-serif; font-size: 1.4rem; color: var(--verde); letter-spacing: 2px; margin-bottom: 0.5rem;">âš½ ProjeÃ§Ãµes</div>
            <div style="color: var(--texto-fraco); font-size: 0.9rem;">Defina os resultados projetados para cada time em cada rodada</div>
        </div>
    </a>

    <a href="/dashboard" style="text-decoration: none;">
        <div style="background: var(--cinza); border: 1px solid var(--cinza-medio); border-radius: 8px; padding: 2rem; transition: border-color 0.2s; cursor: pointer;" onmouseover="this.style.borderColor='var(--amarelo)'" onmouseout="this.style.borderColor='var(--cinza-medio)'">
            <div style="font-family: 'Bebas Neue', sans-serif; font-size: 1.4rem; color: var(--amarelo); letter-spacing: 2px; margin-bottom: 0.5rem;">ğŸ“Š Dashboard</div>
            <div style="color: var(--texto-fraco); font-size: 0.9rem;">Acompanhe como cada time estÃ¡ em relaÃ§Ã£o Ã s projeÃ§Ãµes</div>
        </div>
    </a>

</div>

<div style="margin-top: 3rem; background: var(--cinza); border-radius: 8px; padding: 1.5rem; border-left: 3px solid var(--verde);">
    <div style="font-family: 'Bebas Neue', sans-serif; font-size: 1.1rem; letter-spacing: 1px; color: var(--texto-fraco); margin-bottom: 1rem;">METAS DO CAMPEONATO</div>
    <div style="display: flex; gap: 2rem; flex-wrap: wrap;">
        <div>
            <span style="color: var(--amarelo); font-weight: 600;">ğŸ† TÃ­tulo</span>
            <span style="color: var(--texto-fraco); margin-left: 0.5rem;">80 pontos</span>
        </div>
        <div>
            <span style="color: var(--verde); font-weight: 600;">ğŸŒ Libertadores</span>
            <span style="color: var(--texto-fraco); margin-left: 0.5rem;">70 pontos</span>
        </div>
        <div>
            <span style="color: #e74c3c; font-weight: 600;">â¬‡ï¸ Rebaixamento</span>
            <span style="color: var(--texto-fraco); margin-left: 0.5rem;">45 pontos</span>
        </div>
    </div>
</div>

{% if current_user.is_authenticated and current_user.is_admin %}
<div style="margin-top: 2rem;">
    <button onclick="atualizarResultados()" style="
        background: var(--verde); color: #000; border: none;
        padding: 0.8rem 2rem; border-radius: 6px; font-size: 0.95rem;
        font-weight: 600; cursor: pointer; transition: opacity 0.2s;"
        onmouseover="this.style.opacity='0.85'"
        onmouseout="this.style.opacity='1'"
        id="btn-atualizar">
        ğŸ”„ Atualizar Resultados
    </button>
    <span id="msg-atualizar" style="margin-left: 1rem; color: var(--texto-fraco); font-size: 0.9rem;"></span>
</div>
{% endif %}
{% endblock %}

{% block scripts %}
{% if current_user.is_authenticated and current_user.is_admin %}
<script>
function atualizarResultados() {
    const btn = document.getElementById('btn-atualizar');
    const msg = document.getElementById('msg-atualizar');
    btn.disabled = true;
    btn.textContent = 'â³ Atualizando...';
    msg.textContent = '';

    fetch('/atualizar_resultados', { method: 'POST' })
    .then(res => res.json())
    .then(data => {
        btn.disabled = false;
        btn.textContent = 'ğŸ”„ Atualizar Resultados';
        msg.textContent = `âœ… ${data.novos_resultados} novos resultados! ${data.palpites_calculados} palpites calculados.`;
    })
    .catch(() => {
        btn.disabled = false;
        btn.textContent = 'ğŸ”„ Atualizar Resultados';
        msg.textContent = 'âŒ Erro ao atualizar.';
    });
}
</script>
{% endif %}
{% endblock %}